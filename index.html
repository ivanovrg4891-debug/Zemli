<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8">
<title>–°–∞–º—ñ—Ç–Ω—ñ –ó–µ–º–ª—ñ</title>
<style>
body { font-family:"Courier New", monospace; background:#1b1b1b; color:#f0f0f0; margin:0; padding:0; }
#container { display:flex; height:100vh; }
#main { flex:2; padding:20px; background:#2c2c2c; position:relative; }
#sidebar { flex:1; padding:20px; background:#333; }
#location-img { width:100%; height:200px; background:#555 center/cover no-repeat; margin-bottom:10px; border:1px solid #666; }
button { background:#444; color:#f0f0f0; border:1px solid #666; padding:10px; margin:5px; cursor:pointer; width:120px; }
#battle-log { background:#222; height:180px; overflow-y:auto; padding:10px; margin-top:10px; border:1px solid #666; }
h2{ margin:5px 0;} .stat{ margin:5px 0;}
.modal { display:none; position:absolute; top:20%; left:25%; width:50%; height:50%; background:#222; border:2px solid #666; padding:20px; overflow-y:auto;}
.modal h3 { margin-top:0; }
.item { border:1px solid #666; padding:5px; margin:5px; display:flex; align-items:center; }
.item img { width:40px; height:40px; margin-right:10px; }
.equip-slot { font-size:12px; color:#ccc; margin:2px 0; }
.equip-slot span { color:#f0f0f0; font-weight:bold; }
</style>
</head>
<body>
<div id="container">
  <div id="main">
    <div id="location-img"></div>
    <h2 id="location-name"></h2>
    <p id="location-text"></p>
    <div>
      <button onclick="attackMob()">üó°Ô∏è –ü–æ–ª—é–≤–∞–Ω–Ω—è</button>
      <button onclick="explore()">üß≠ –î–æ—Å–ª—ñ–¥–∏—Ç–∏</button>
      <button onclick="openInventory()">üéí –Ü–Ω–≤–µ–Ω—Ç–∞—Ä</button>
      <button onclick="showCharacter()">üë§ –ü–µ—Ä—Å–æ–Ω–∞–∂</button>
      <button onclick="openCraft()">‚öíÔ∏è –ö—Ä–∞—Ñ—Ç</button>
      <button onclick="openLocationModal()">üåç –õ–æ–∫–∞—Ü—ñ—ó</button>
      <button onclick="saveGame()">üíæ –ó–±–µ—Ä–µ–≥—Ç–∏</button>
    </div>
    <div id="battle-log"></div>

    <!-- –Ü–Ω–≤–µ–Ω—Ç–∞—Ä -->
    <div id="inventory-modal" class="modal">
      <h3>–Ü–Ω–≤–µ–Ω—Ç–∞—Ä</h3>
      <div id="inventory-items"></div>
      <button onclick="closeInventory()">–ó–∞–∫—Ä–∏—Ç–∏</button>
    </div>

    <!-- –ö—Ä–∞—Ñ—Ç -->
    <div id="craft-modal" class="modal">
      <h3>–ö—Ä–∞—Ñ—Ç</h3>
      <div id="craft-list"></div>
      <button onclick="closeCraft()">–ó–∞–∫—Ä–∏—Ç–∏</button>
    </div>

    <!-- –í–∏–±—ñ—Ä –ª–æ–∫–∞—Ü—ñ—ó -->
    <div id="location-modal" class="modal">
      <h3>–í–∏–±—ñ—Ä –ª–æ–∫–∞—Ü—ñ—ó</h3>
      <div id="location-list"></div>
      <button onclick="closeLocationModal()">–ó–∞–∫—Ä–∏—Ç–∏</button>
    </div>
  </div>

  <div id="sidebar">
    <h2>–ü–µ—Ä—Å–æ–Ω–∞–∂</h2>
    <div class="stat">–Ü–º'—è: –ì–µ—Ä–æ–π</div>
    <div class="stat">–†—ñ–≤–µ–Ω—å: <span id="level">1</span></div>
    <div class="stat">HP: <span id="hp">35</span></div>
    <div class="stat">EXP: <span id="exp">0</span></div>
    <div class="stat">–°–∏–ª–∞: <span id="strength">3</span></div>
    <div class="stat">–°–ø—Ä–∏—Ç–Ω—ñ—Å—Ç—å: <span id="agility">3</span></div>
    <div class="stat">–í–∏—Ç—Ä–∏–≤–∞–ª—ñ—Å—Ç—å: <span id="endurance">3</span></div>
    <div class="stat">–£–¥–∞—á–∞: <span id="luck">2</span></div>
    <div class="stat">–ú–∞–π—Å—Ç–µ—Ä–Ω—ñ—Å—Ç—å: <span id="mastery">2</span></div>

    <h2>–ï–∫—ñ–ø—ñ—Ä–æ–≤–∫–∞</h2>
    <div class="equip-slot">–ó–±—Ä–æ—è: <span id="equip-weapon">–Ω–µ–º–∞—î</span></div>
    <div class="equip-slot">–¢—ñ–ª–æ: <span id="equip-body">–Ω–µ–º–∞—î</span></div>
    <div class="equip-slot">–ù–æ–≥–∏: <span id="equip-legs">–Ω–µ–º–∞—î</span></div>
  </div>
</div>

<script>
let character = {
  hp:35,
  level:1,
  exp:0,
  baseStats:{ strength:3, agility:3, endurance:3, luck:2, mastery:2 },
  stats:{}, 
  equipment:{ weapon:null, body:null, legs:null },
  inventory:[
    { name:"–°—Ç–∞—Ä–∏–π –Ω—ñ–∂", img:"https://i.imgur.com/niz0.png", type:"weapon", slot:"weapon", stats:{ damage:3, strength:1 } },
    { name:"–ü–æ—Ç–µ—Ä—Ç–∞ –∫—É—Ä—Ç–∫–∞", img:"https://i.imgur.com/Bod0.png", type:"armor", slot:"body", stats:{ armor:1, hp:5 } },
    { name:"–î–∏—Ä—è–≤—ñ —à—Ç–∞–Ω–∏", img:"https://i.imgur.com/leg0.png", type:"armor", slot:"legs", stats:{ armor:1, agility:1, hp:2 } }
  ]
};

let locations = [
  {name:"–î–∏–∫–µ –£–∑–±–µ—Ä–µ–∂–∂—è", img:"https://i.imgur.com/3Lz2p1Q.png", text:"–í—ñ—Ç–µ—Ä –∑ –º–æ—Ä—è –Ω–µ—Å–µ –∑–∞–ø–∞—Ö —Å–æ–ª—ñ —Ç–∞ –≥–Ω–∏–ª–æ—ó –¥–µ—Ä–µ–≤–∏–Ω–∏...", mobs:[]},
  {name:"–†—É—ó–Ω–∏ –°—Ç–∞—Ä–æ–¥–∞–≤–Ω—å–æ–≥–æ –§–æ—Ä—Ç–∞", img:"https://i.imgur.com/3Lz2p1Q.png", text:"–†—É—ó–Ω–∏ —Å—Ç–∞—Ä–æ–¥–∞–≤–Ω—å–æ–≥–æ —Ñ–æ—Ä—Ç—É —Å—Ç–æ—è—Ç—å –Ω–∞ –ø–∞–≥–æ—Ä–±—ñ...", mobs:[]}
];

let currentLocation = locations[0];
let battleLog = document.getElementById('battle-log');

function addLog(text){ battleLog.innerHTML += text+'<br>'; battleLog.scrollTop=battleLog.scrollHeight; }

function recalcStats(){
  character.stats = {...character.baseStats};
  character.stats.hp = character.baseStats.endurance*5+20;
  character.stats.armor = 0;
  character.stats.damage = 0;
  Object.values(character.equipment).forEach(item=>{
    if(!item || !item.stats) return;
    for(let stat in item.stats){
      character.stats[stat] = (character.stats[stat]||0) + item.stats[stat];
    }
  });
  character.hp = Math.min(character.hp, character.stats.hp);

  document.getElementById('hp').innerText = character.hp;
  document.getElementById('strength').innerText = character.stats.strength;
  document.getElementById('agility').innerText = character.stats.agility;
  document.getElementById('endurance').innerText = character.stats.endurance;
  document.getElementById('luck').innerText = character.stats.luck;
  document.getElementById('mastery').innerText = character.stats.mastery;

  document.getElementById('equip-weapon').innerText = character.equipment.weapon ? character.equipment.weapon.name : "–Ω–µ–º–∞—î";
  document.getElementById('equip-body').innerText = character.equipment.body ? character.equipment.body.name : "–Ω–µ–º–∞—î";
  document.getElementById('equip-legs').innerText = character.equipment.legs ? character.equipment.legs.name : "–Ω–µ–º–∞—î";
}

function changeLocation(index){
  currentLocation=locations[index];
  document.getElementById('location-name').innerText=currentLocation.name;
  document.getElementById('location-text').innerText=currentLocation.text;
  document.getElementById('location-img').style.backgroundImage=`url('${currentLocation.img}')`;
  addLog(`–¢–∏ –ø–µ—Ä–µ–º—ñ—Å—Ç–∏–≤—Å—è –¥–æ: ${currentLocation.name}`);
}

function openLocationModal(){
  let modal=document.getElementById('location-modal');
  let list=document.getElementById('location-list');
  list.innerHTML='';
  locations.forEach((loc,i)=>{
    let btn=document.createElement('button');
    btn.innerText=loc.name; 
    btn.onclick=()=>{changeLocation(i); closeLocationModal();};
    list.appendChild(btn);
  });
  modal.style.display='block';
}

function closeLocationModal(){ document.getElementById('location-modal').style.display='none'; }

function openInventory(){
  let modal = document.getElementById('inventory-modal');
  let container = document.getElementById('inventory-items');
  container.innerHTML = '';
  character.inventory.forEach((it, idx)=>{
    let div = document.createElement('div');
    div.className='item';
    let statsText='';
    if(it.stats) for(let k in it.stats) statsText+=`<div style="font-size:12px;color:#ccc;">${k}: +${it.stats[k]}</div>`;
    let btnHTML = '';
    if(it.slot){ 
      if(character.equipment[it.slot] && character.equipment[it.slot].name === it.name){
        btnHTML = `<button onclick="unequipItem('${it.slot}')">–ó–Ω—è—Ç–∏</button>`;
      } else {
        btnHTML = `<button onclick="equipItem(${idx})">–û–¥—è–≥—Ç–∏</button>`;
      }
    }
    div.innerHTML=`<img src="${it.img}" alt="${it.name}"><div><strong>${it.name}</strong>${statsText}</div>${btnHTML}`;
    container.appendChild(div);
  });
  modal.style.display='block';
}

function equipItem(index){
  let item = character.inventory[index];
  if(!item.slot){ addLog("–¶–µ–π –ø—Ä–µ–¥–º–µ—Ç –Ω–µ –º–æ–∂–Ω–∞ –æ–¥—è–≥—Ç–∏."); return; }
  if(character.equipment[item.slot]) unequipItem(item.slot);
  character.equipment[item.slot] = item;
  addLog(`–¢–∏ –æ–¥—è–≥–Ω—É–≤ ${item.name}`);
  recalcStats();
  openInventory();
}

function unequipItem(slot){
  if(!character.equipment[slot]) return;
  addLog(`–¢–∏ –∑–Ω—è–≤ ${character.equipment[slot].name}`);
  character.equipment[slot] = null;
  recalcStats();
  openInventory();
}

function closeInventory(){ document.getElementById('inventory-modal').style.display='none'; }

recalcStats();
changeLocation(0);
</script>
</body>
</html>
